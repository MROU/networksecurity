<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="../functions/wlaq.css" rel="stylesheet" type="text/css" />
<script src="../functions/jquery.js">

</script>

<script type="text/javascript" src="../functions/common.js"> 

</script>

 

<script type="application/javascript">
$(document).ready(
function()
{
$(".sy1").click(function()
{
     $(".zyxzdoc").slideToggle("slow");	
 })	;
}

)
</script>
<style type="text/css">
#experiment
{
	 
	color:#666;
	font-size:16px;
	position:relative;
	margin-left:40px;
	top:10px;
	border:solid 1px #c3c3c3;
	width:680px;
	height:auto;
	
}
#boder2
{
	position:relative;
	width:680px;
	height:15px;
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>网络安全experiment</title>

</head>

<body bgcolor="#FFFFFF">
<div class="identity">
    <div class="identity"> <div id="login"> <strong>Beta</strong></div></div>
</div>
<div  class="site-header">

<a style="text-decoration:none" href="index.html"><div  class="logo" align="center">
网络安全
</div>
</a>
</div>
<div class="border">
<img src="img/boder.JPG" />
</div>
<div class="content1">
<div class="content11">
 <strong>
 王晓菊
<a   style="text-decoration:none" href="mailto:wangxj@ncist.edu"><font color="#666">wangxj@ncist.edu</font></a>
</strong> 
<h1 align="center"><font class="kcjs" color="#000000">课程介绍</font></h1>
<div class="js" style="display:none; font-size:large" align="center"><li>课程简介</li> <li>教师介绍</li><li>教学大纲</li> <li>学习指导</li></div>

<h1 align="center"><font  class="kcsy" color="#000000">课程实验</font></h1>
<div class="sy" style="display:none; font-size:large" align="center"><li><a style="text-decoration:none" href="实验一.html"><font color="#000;">实验一</font></a></li> <li><a style="text-decoration:none" href="实验二.html"><font color="#000;">实验二</font></a></li><li><a style="text-decoration:none" href="实验三.html"><font color="#000;">实验三</font></a></li><li><a style="text-decoration:none" href="实验四.html"><font color="#000;">实验四</font></a></li> <li><a style="text-decoration:none" href="实验五.html"><font color="#000;">实验五</font></a></li><li><a style="text-decoration:none" href="实验六.html"><font color="#000;">实验六</font></a></li><li><a style="text-decoration:none" href="实验七.html"><font color="#000;">实验七</font></a></li><li><a style="text-decoration:none" href="综合实验.html"><font color="#000;">综合实验</font></a></li></div>

<h1 align="center"><a href="资源下载.html" style="text-decoration:none"><font class="zyxz" color="#000000">资源下载</font></a></h1>
<div class="xz" style="display:none; font-size:large" align="center"><li>实验一</li> <li>实验二</li><li>实验三</li><li>实验四</li> <li>实验五</li><li>实验六</li><li>实验七</li><li>综合实验</li></div>

<h1 align="center"><a href="课外拓展.html" style="text-decoration:none"><font color="#000000">课外拓展</font></a></h1>

<h1 align="center"><a href="项目创新.html" style="text-decoration:none"><font color="#000000">项目创新</font></a></h1>
<h1 align="center"><a href="结课辩论.html" style="text-decoration:none"><font color="#000000">结课辩论</font></a></h1>
</div>
</div>


<div id="maincontent">

<div id="experiment">
<h1>实验二</h1>

 
<p class="flip">实验二软件，指导单</p>
<div class="panel">
<pre>
VPN原理简介
	所谓虚拟专用网（VPN），是指将物理上分布在不同地点的网络通过公
    用网络连接形成的逻辑上的虚拟子网，并采用认证、访问控制、机密性、
    数据完整性等在公众网络上构建专用网络的技术，使得数据通过安全
    的"加密隧道"在公众网络中传播。这里的公用网通常是指因特网。
	根据VPN的组网方式、连接方式、访问方式、隧道协议、工作的层次（OSI
    模型或TCP/IP模型）等的不同，可以有多种分类方式。从当前应用来看，
    VPN主要有两种类型：远程访问/移动用户VPN连接和网关-网关VPN连接。
	1. 远程访问/移动用户VPN连接
	远程访问VPN连接有远程访问客户机提出连接请求，VPN服务器提供对VPN
    服务器或整个网络资源的访问服务。再次连接中，链路上第一个数据包
    总是有进行远程访问的客户机发出的。远程客户机先对服务器提供自己
    的身份认证，之后作为双向认证的第二步，服务器也对客户机证明自己的身份。
	2. 网关-网关VPN连接
	网关-网关VPN连接是由呼叫网关提出连接请求，另一端VPN网关做出响应。在
    这种方式中，链路的两端各自是专用网络的两个不同部分，通常来自呼叫网
    关的数据包并非源自该网关本身，一般来自其内网的子网主机。呼叫网关首
    先对应大网管提供自己的身份认证，作为双向认证的第二步，应答网关也应对
    呼叫网关证明自己的身份。
	VPN服务器：接收来自VPN客户机的连接请求
	VPN客户机：可以使终端计算机，也可以是路由器。
	隧道：数据传输通道，在其中传输的数据必须经过封装。
	VPN连接：在VPN连接中，数据必须经过加密。
	隧道协议：封装数据、管理隧道的通信标准。
	传输数据：经过封装、加密后在隧道上传输的数据
	公共网络：如Internet，也可以是其他类型的共享型网络。
	从隧道协议及工作层次对VPN分类，又可以将其分为PPTP VPN、
    L2F VPN、L2TP VPN、MPLS VPN、IPSec VPN、SSL VPN、SOCKS VPN。
</pre>
</div>
<hr>


<h2 class="sy1">子实验一  Windows 2003环境下PPTP VPN的配置</h2>
<hr />
<p class="flip1">实验目的,学时，环境，内容</p>
<div class="panel1">
<pre>
实验目的
	通过实验掌握虚拟专用网的实现原理和基本机构。
	熟悉在Windows中的基于PPTP VPN的配置。
实验学时
	1学时
实验环境
	需要以下设备和软件
	（1）一台Windows 2003 Server的服务器。
	（2）两台Windows XP Professional、Windows 2000 
    professional或 Windows7 wltimate，其中一台
    作为嗅探（sniffer）主机，另一台作为客户端。
	（3）三台机器使用hub连接，以便于嗅探。
    实验内容
	1.查阅虚拟专用网的实现原理
	2.在Windows 2003的计算机上配置PPTP VPN
	原理简介
        隧道技术的核心是隧道协议，由3Com和Microsoft等开发的点
        对点隧道协议（PPTP）是第一个广泛使用建立的VPN隧道协议。
        PPTP是点对点协议（PPP）的扩展，主要在认证、压缩和加密功能
        上做了相当的扩展。PPTP在一个已存在的IP连接上封装PPP绘
        画，只要网络层是联通的，就可以运行PPTP。PPTP将控制包和
        数据包分开，控制包采用TCP控制，用于严格的状态查询以及
        信令信息；数据包部分先封装在PPP中，然后封装到GRE协议（
        通用路由封装协议）中，用于标准IP包中封装任何形式的数据包。
        

</pre>
</div>
<hr />
<p class="flip2">实验步骤  </p>
<div class="panel2">
<pre>
实验步骤
	（1）首先配置VPN服务器，在Windows 2003 Server中打开控制面板中的
    【管理工具】，双击【路由和远程访问】进入配置界面，如图所示。
	（2）右击已存在的本地服务器名称，选择【配置并启动路由和远程访
    问】菜单，将会弹出【路由和远程访问服务器安装向导】对话框，单击
    【下一步】按钮。
	（3）在【配置】界面中，在Windows Server 2003系统下用双网卡建立
    VPN服务器更容易实现，但需要在一台服务器上配置两块网卡，本
    实验介绍使用单网卡实现建立VPN服务器的方法。选择【自定义配置】
    并单击【下一步】按钮。
	（4）在【自定义配置】中，选择【VPN访问】选项，单击【下一步】按钮，然
    后在下一个界面中单击【完成】按钮，完成安装向导配置。系统会
    弹出对话框询问是否开始路由和远程访问服务，单击【是】按钮开始服务。
	（5）接下来是开放用户的拨入权限，同样在【管理工具】中选择【计算
    机管理】，在【计算机管理】界面的控制台左边双击【本地用户和组
    】，展开后选择【用户】。
	（6）直接对右边的Administrator进行权限开放：右击Administrator，选择
    【属性】，弹出【Administrator属性】对话框后，选择【拨入】选项卡，如图
    所示。在【远程访问权限（拨入或VPN）】一栏中选中【允许访问】，然后单
    击【确定】按钮退出。到此为止，服务器的配置已经全部完成，接下
    来是客户端的配置。
	（7）从这一步开始配置客户端，打开控制面板中的【网络连接】，窗
    口弹出后，选择菜单【文件】中的【新建连接】，此时将弹出【新建连
    接向导】，单击【下一步】按钮。
	（8）在【网络连接类型】中选择【连接到我的工作场所的网络】，并
    单击【下一步】按钮。
	（9）在【网络连接】中，选择【虚拟专用网络连接】。
	（10）下一步是公司名称的填写，可以直接单击【下一步】按钮跳过。
	（11）在【VPN服务器选择】界面中，填写IP地址时请填入服务器的IP
    地址，根据开始时的约定此处为192.168.2.254，如图所示。
	（12）单击【下一步】按钮后向导将提示配置完成，选择【完成】，弹出
    【拨号】窗口，此时请输入在服务器中所开放权限的用户名和相关密码，然后单击【连接】按钮。
	（13）为了更清楚地观察连接建立的过程，在此推荐使用软件TCPView
    ，该软件可以动态显示当前的活动端口的状态，如图所示为建立连接时
    ，服务器端口的变化。分别在客户端和服务器观察端口的状态变化，并
    留意分别是什么端口。
	（14）在客户端ping 192.168.2.254这个地址，同时在嗅探机上开启嗅探功能，
    如果所示分别是建立VPN连接前后sniffer pro抓取的数据包的内容。可以
    发现，VPN连接建立后sniffer pro识别出数据包时GRE协议的，与VPN连接建立
    前观察到的ICMP数据包已经不同了。
 
</pre>

</div>
<hr />
<h2 class="sy1">子实验二  Windows XP环境下IPSec VPN的配置</h2>

<hr />
<p class="flip3">实验目的,学时，环境，内容</p>
<div class="panel3">
<pre>
实验目的
	本实验主要验证IP通信在建立IPSec隧道前后的变化，为了简化实验过程，
    这里只对ICMP进行加密，但在配置的过程中即可发现，其他IP协议要进行
    同样的加密也是非常简单的。实验的拓扑跟上面实验一样，只是逻辑上
    两台实验机为点对点的。
实验学时
	1学时
实验环境
	实验中使用以下软件和硬件设备
	（1）Windows XP操作系统
	（2）一个hub集线器
	（3）三台装有操作系统的台式PC机。
	实验环境拓扑结构如图所示。

实验内容
	1. 了解IPSec
	2. 在Windows XP的计算机上配置IPSec VPN
	原理简介
        IPSec在IP层上对数据包惊醒高强度的安全处理，提供数据源地址验证、无连接
        数据完整性、数据机密性、抗重播和有限业务流机密性等安全服务。各种应用
        程序可以享用IP层提供的安全服务和密钥管理，而不必设计和实现自己的安全
        机制，因此减少了密钥协商的开销，也降低了产生安全漏洞的可能性。
            

</pre>
</div>
<hr />
<p class="flip4">实验步骤  </p>
<div class="panel4">
<pre>
	（1）为了观察方便，首先把嗅探者的嗅探软件打开，然后在两台机器中启动PING，
    即在192.168.2.111机器中使用命令ping192.168.2.254 –t，而在192.168.2
    .254机器中使用命令ping 192.168.2.111 –t。这样可以看到两台机器均
    能显示正常的回应。而在嗅探器中，同样显示其正常的ICMP通信。
	（2）能观察到两端的正常通信后，开始IPSec的配置。打开控制面板中的【管理工
    具】，双击里面的【本地安全策略】。右击左边树状菜单中的【IP安全策略，在本地
    机器】。

	（3）选择右键菜单中的【创建IP安全策略】，系统将弹出【IP安全策略向导】。
    单击【下一步】按钮。然后为该安全策略命名，如"icmp-ipsec"，再单击【下
    一步】按钮。

	（4）在【安全通信请求】对话框中，去掉【激活默认响应规则】的选择，单击
    【下一步】按钮，此时已完成了安全策略向导，保留【编辑属性】的选择，
    然后单击【完成】按钮退出。
	（5）完成后，将立即弹出其属性对话框。首先去掉【使用"添加向导"】
    的选择，然后单击【添加】按钮，弹出如图所示的对话框。

	（6）在【IP筛选器列表】选项卡中，选择【所有ICMP通信量】，由于软件本
    身表达如此，故未改。
	（7）单击【筛选器操作】标签，选择【筛选器操作】列表中的【需要安全】。
	（8）单击【身份验证方法】标签，单击【添加】按钮，弹出如图所示的对话框。
	（9）选择【使用此字串（预共享密钥）】，然后输入共享密钥，此处使用
    "123456"，然后单击【确定】按钮退出。

	（10）回到【新规则属性】对话框，单击【确定】按钮退出，同样，
    回到【icmp-IPSec属性】对话框后，单击【关闭】按钮退出。
	（11）回到【本地安全设置】窗口，右击icmp-ipsec，选择【指派】菜单项，
    如图所示。

	（12）此时观察两端的ICMP通信，将发现以下情况：在已配置策略的一段，
    系统将提示Negotiating IP Security；而没有配置的一端，系统直接提示
    Requst timed out，如图所示。
	（13）在另一端，进行上述策略的同样设置（完全一样），请在此观察效果，
    此时发现 ICMP通信恢复了正常，重点在于嗅探机的变化，如图所示。
	可以发现，sniffer Pro能够识别出数据包是ESP的，但其内容与前面观
    察到的ICMP数据包已经完全不同了。
	思考：
	（1）比较直接传输的数据包和通过VPN传输的数据包的不同。
	（2）课后在【IP筛选器列表】中，选择【所有IP通信量】，测试其他网络协议。
 
</pre>

</div>
</div>


<div class="border1">
<img src="../img/boder.JPG" />
</div>
<div class="footer" align="center">
大智若愚，求知若渴<br />
stay hungry stay foolish
<div  class="footer1" align="center">
Copyright © 2013, 华北科技学院. Designs by 华北科技学院.


</div>
</div>
</body>
</html>

